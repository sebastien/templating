{"object": "{&quot;status&quot;:&quot;published&quot;,&quot;title&quot;:&quot;Faire du crochet, en vid\\u00e9o&quot;,&quot;oid&quot;:&quot;db2f8fc5-1bd7-4363-bb0e-c060a6c83a19&quot;,&quot;comments&quot;:[{&quot;date&quot;:[2012,9,4,22,5,50,1,248,-1],&quot;message&quot;:&quot;Super cette video!&quot;,&quot;oid&quot;:&quot;b08ec19b-df7f-4a4d-84e1-265d00a12303&quot;,&quot;type&quot;:&quot;artnet.model.Comment&quot;},{&quot;date&quot;:[2012,9,4,22,5,56,1,248,-1],&quot;message&quot;:&quot;Blahsada sdsads a&quot;,&quot;oid&quot;:&quot;162cf5ba-99bc-411f-82bf-7794943a8a48&quot;,&quot;type&quot;:&quot;artnet.model.Comment&quot;},{&quot;date&quot;:[2012,9,4,22,6,1,1,248,-1],&quot;message&quot;:&quot;asdasdsas&quot;,&quot;oid&quot;:&quot;5c240b17-286b-44c8-a56a-180c7cd58c41&quot;,&quot;type&quot;:&quot;artnet.model.Comment&quot;}],&quot;photos&quot;:[{&quot;timestamp&quot;:20120904215125,&quot;rid&quot;:&quot;07a9fef0-8ef1-4769-a815-a27ae09d49a0&quot;,&quot;type&quot;:&quot;artnet.model.Photo&quot;},{&quot;timestamp&quot;:20120904215128,&quot;rid&quot;:&quot;dfeb2c27-d5bb-4cb1-b9bb-b0b2037adb89&quot;,&quot;type&quot;:&quot;artnet.model.Photo&quot;},{&quot;timestamp&quot;:20120904215131,&quot;rid&quot;:&quot;c94f4bcd-b3b7-4375-8fdd-5a77e3ead9c1&quot;,&quot;type&quot;:&quot;artnet.model.Photo&quot;}],&quot;steps&quot;:[{&quot;description&quot;:&quot;Faire du  crochet, c'est super sympa!&quot;,&quot;title&quot;:&quot;Faire du crochet&quot;,&quot;media&quot;:{&quot;timestamp&quot;:20120830220831,&quot;rid&quot;:&quot;c6df95d3-b9c6-4cb1-8826-ade31250a73a&quot;,&quot;type&quot;:&quot;artnet.model.Video&quot;},&quot;oid&quot;:&quot;c80bcb7e-a55b-71cd-9332-4f167e4f1770&quot;,&quot;photos&quot;:[{&quot;timestamp&quot;:20120904215125,&quot;rid&quot;:&quot;07a9fef0-8ef1-4769-a815-a27ae09d49a0&quot;,&quot;type&quot;:&quot;artnet.model.Photo&quot;},{&quot;timestamp&quot;:20120904215128,&quot;rid&quot;:&quot;dfeb2c27-d5bb-4cb1-b9bb-b0b2037adb89&quot;,&quot;type&quot;:&quot;artnet.model.Photo&quot;},{&quot;timestamp&quot;:20120904215131,&quot;rid&quot;:&quot;c94f4bcd-b3b7-4375-8fdd-5a77e3ead9c1&quot;,&quot;type&quot;:&quot;artnet.model.Photo&quot;}],&quot;publishedBy&quot;:[],&quot;type&quot;:&quot;artnet.model.TutorialStep&quot;},{&quot;description&quot;:&quot;asdasdasasdsa&quot;,&quot;title&quot;:&quot;Wouah!&quot;,&quot;media&quot;:{&quot;timestamp&quot;:20120830221228,&quot;rid&quot;:&quot;4318f9b1-4e96-414f-93f2-5be4f1535250&quot;,&quot;type&quot;:&quot;artnet.model.Photo&quot;},&quot;oid&quot;:&quot;21abe232-5a15-efb2-b49c-e82b2593da69&quot;,&quot;photos&quot;:[],&quot;publishedBy&quot;:[],&quot;type&quot;:&quot;artnet.model.TutorialStep&quot;}],&quot;createdBy&quot;:[],&quot;type&quot;:&quot;artnet.model.Tutorial&quot;,&quot;categories&quot;:[]}", "site": "ARTNet", "isConnected": "false", "base": "/", "cachebuster": 1346868697.785297, "year": 2012, "categories": [{"children": [{"name": "artdeco/basics"}, {"name": "artdeco/suggestions"}, {"name": "artdeco/creations"}], "name": "artdeco"}, {"children": [{"name": "broderie/basics"}, {"name": "broderie/suggestions"}, {"name": "broderie/creations"}], "name": "broderie"}, {"children": [{"name": "pointe/basics"}, {"name": "pointe/suggestions"}, {"name": "pointe/creations"}], "name": "pointe"}, {"children": [{"name": "couture/basics"}, {"name": "couture/suggestions"}, {"name": "couture/creations"}], "name": "couture"}, {"children": [{"name": "crochet/basics"}, {"name": "crochet/suggestions"}, {"name": "crochet/creations"}], "name": "crochet"}, {"children": [{"name": "peinture/basics"}, {"name": "peinture/suggestions"}, {"name": "peinture/creations"}], "name": "peinture"}, {"children": [{"name": "tissage/basics"}, {"name": "tissage/suggestions"}, {"name": "tissage/creations"}], "name": "tissage"}, {"children": [{"name": "tricot/basics"}, {"name": "tricot/suggestions"}, {"name": "tricot/creations"}], "name": "tricot"}, {"name": "evenements"}, {"name": "site"}], "language": null, "title": "tutorial-edit", "tagline": "", "meta": {"keywords": "TODO,TODO,TODO", "description": "TODO"}, "page": "tutorial-edit", "user": "null"}
===
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
	<head(profile="http://www.w3.org/2005/10/profile")
		<meta(http-equiv=Content-Type,content="text/html; charset=utf-8")
		<meta(charset=utf-8)
		<meta(name="description",content="${meta.description}")
		<meta(name="keywords",content="${meta.keywords}")
		<link(rel="icon",type="image/x-icon",content="${base}favicon.ico")
		<link(rel="shortcut icon",type="image/x-icon",content="${base}favicon.ico")
		<title:${title}
		# EOF
		
		# CSS libraries
		<link(rel=Stylesheet,type=text/css,href=${base}lib/css/reset.css+fonts.css+video-js.min.css)
		<link(rel=Stylesheet,type=text/css,href=${base}lib/ccss/base.ccss+artnet.ccss)
		# EOF
		# JS libraries
		<!--[if lt IE 9]><script(src="${base}lib/js/html5shiv-3.6.js"><![endif]-->
		<script(language=javascript,type="text/javascript",src="${base}lib/js/extend-2.3.13.js+jquery-1.7.1.js+jquery.preload-1.2.0.js+jquery.address-1.4.js+jquery.mousewheel-3.0.6.js+html-5.0.js+sprintf-1.0.js+json-2.0.0.js+markdown-0.4.0.js+video.min.js+sharing-1.0.js")
		<script(language=javascript,type="text/javascript",src="${base}lib/sjs/linking.sjs+eventbus.sjs+channels.sjs+placement.sjs+widgets.sjs+formatting.sjs+stats.sjs+iciela.sjs+artnet.sjs")
		# EOF
		<script(language=javascript,type="text/javascript",src="${base}lib/sjs/artnet-edit.sjs")
	<body.reset.use-base
		<div#EditPage.Page.expand
			<header#Header.widget.connected(data-widget=artnet.Connection,data-user=${user})
				<section#Connection.hidden.when(data-state=status:open)
					<h1.logo:artnet
					<p.FIXME
						Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam id
						libero diam, vitae hendrerit dui. Suspendisse ullamcorper quam nec
						nunc blandit posuere.
					<form.when(data-state=form:connection)
						<div.field
							<input.in(name=email,type=text,data-label="${T:en=Email,fr=Email}")
						<div.field
							<input.in(name=password,type=password,value="")
						<div.clearer:
						<div.messages
							<div.error.when(data-state=message:wrong_credential):Mauvais mot de passe ?
							<div.info.forgotPasswordSuccess.when(data-state=message:forget_password_succeed):Votre mot de passe vient d'arriver dans votre messagerie
						<div.actions
							<a.internal.forgotpass.do(data-action=showForgotPassword):${T:en=Forgot your password?,fr=Mot de passe oublié ?}
							<button.do(data-action=connect)
								<span:Connection &rarr;
					<form.when(data-state=form:forgotpassword)
						<div.field
							<input.in(name=email_forgot,type=text,data-label="${T:en=Email,fr=Email}")
						<div.clearer:
						<div.messages
							<div.error.forgotPasswordError.when(data-state=message:wrong_mail):Nous ne connaissons pas l'adresse email donnee
						<div.actions
							<button.do(data-action=forgetPassword)
								<span:Send me my password
					<div.clearer
				<nav.when.hidden(data-state=connected:true)
					<a.about.upper(rel=subsection,href=#about):${T:en=About,fr=À propos}
					<span.right
						<span:Bonjour 
						<span.out(data-field=username):
						<a.connect.upper.do(data-action=disconnect,rel=subsection,href=#): | ${T:en=Disconnect,fr=Se deconnecter}
					<span.clearer
				<nav.when(data-state=connected:false)
					<a.internal.about.upper.when(rel=subsection,href=#about,data-state=status:closed):${T:en=About,fr=À propos}
					<span.right
						<a.internal.connect.upper.when(rel=subsection,href=#+connect,data-state=status:closed):${T:en=Login,fr=Se connecter}
						<a.internal.close.upper.when.hidden(rel=subsection,href=#-connect,data-state=status:open):${T:en=Close,fr=Fermer}
					<span.clearer
			# EOF
			<section#Navigation.widget(data-widget=artnet.Navigation)
				<a.logo(href=/,rel=index):artnet
				<nav
					<a.button.internal.is-browse(href=/)
						<span.label:${T:en=Browse,fr=Explorer}
					<a.button.internal.is-search(href=/search)
						<span.label:${T:en=Search,fr=Recherche}
					<a.button.internal.is-create(href=/create)
						<span.label:${T:en=Create,fr=Créer}
					<a.button.internal.is-publish(href=/publish)
						<span.label:${T:en=Publish,fr=Publier}
					<a.button.internal.is-help(href=#help)
						<span.label:${T:en=Help!,fr=À l'aide!}
				<div.clearer
				<div.input.search.widget(data-widget=artnet.SearchQuery)
					<div.tip:
						<span:&#9650;
					<input.in(type=text,data-label=Tapez votre recherche)
					<div.buttons
					#	<button.clear.do.hidden(data-action=clear)
					#		<span.T:&times;
						<button.do(data-action=search)
							<span.T:Search
					<div.clearer
			%include Help +.hidden
			# EOF
			<div#Content.widget(data-widget=artnet_edit.EditPage,data-object=${object})
				<header
					<div.tip(style=right:10em)
						<span:&#9650;
					# NOTE: Removed for now, redundant with browser button
					# %include widgets/Back
					<h1.T:Editez votre tutoriel
				<section.steps
					<div.tutorial-container.template
						<div.TutorialStep.widget(data-widget=artnet.TutorialStep)
							<div.video
								<div.iterator
									<ul
										<li.step.template
											<span.label
										<li.bar.is-before(style=left:0%;width:22.5%)
										<li.bar.is-rest(style=left:72.5%;width:27.5%)
										<li.bar.is-progress(style=left:22.5%;width:52.5%)
								# =====================================================================
								# IMAGE PLAYER + EDITOR
								# =====================================================================
								<div.image.layout
									<div.player.when(data-state=edit:false)
									<div.editor.hidden.when(data-state=edit:true)
										%include Uploader +.PhotoUploader
										%include Uploader +.MediaUploader
										<div.type.L.hidden.when(data-layout=centered,data-state=step:change)
											<button.big.do(data-action=changeMedia)
												<span.label.T:Changer la photo/video
										<div.type.L.hidden.when(data-layout=centered,data-state=step:select)
											<button.big.do(data-action=uploadMedia)
												<span.label.T:Charger une photo/video
											# FIXME: Disabled for now
											# <button.big.do(data-action=search)
											# 	<span.label.T:Trouver une video
										# -------------------------------------------------------------
										# UPLOAD
										# -------------------------------------------------------------
										<div.upload.expand.hidden.when(data-state=step:upload)
											# FIXME: This is not used
											<ul.info.to-n.expand-w.hidden
												<li
													<span.label.T:Durée
													<span.value.out(data-field=duration):2:00
												<li
													<span.label.T:Poids
													<span.value.out(data-field=size):24Mb
											<div.progress.to-s.expand-w
												<div.bar
												<div.text
													<span.out(data-field=filename):laine_pour_pugs.mov
													 (<span.out(data-field=uploadPercentage):0>%)
												<button.cancel.do.close(data-action=cancelMediaUpload)
													<span:&times;
										<div.error.L.hidden(data-layout=centered)
											<button.big.do(data-action=uploadMedia)
												<span.label.T:Charger une photo/video
											<div.message:
												<div.body
													<div.title.T:Erreur<br>de chargement
													<div.text.T:Veuillez<br>réessayer
										# -------------------------------------------------------------
										# SEARCH 
										# -------------------------------------------------------------
										<div.search.hidden.when(data-state=step:search)
											<div.query
												<div.input
													<input.in(name=query,data-label=Tapez des mots-clé ou entrez une URL)
													<button.do.remove
														<span:&times;
													<div.clearer
											<div.results.hidden
												<div.meta.when(data-state=search:loading)
													<span.label.T:Recherche en cours...
												<div.meta.when(data-state=search:empty)
													<span.label.T:Aucun résultat trouvé>
												<div.meta.when(data-state=search:results)
													<div.count.left
														<span.value:0> <span.label.T:media trouvés>
													# FIXME: Hidden for now
													# <ul.filter.select.right
													# 	<li.option.current:Favoris
													# 	<li.option:Tout
													<div.clearer
												<div.results-wrapper.L.when(data-state=search:results,data-layout=stick:S-S)
													<div.results-window
														<ul.media.as-x-small
															<li.template
																<a(href=#video)
																	<div.image
																	<div.title:Titre de la video
									# =================================================================
									# NEXT VIDEOS
									# =================================================================
									<div.videos-next.when.hidden(data-state=edit:false)
										<div.video-wrapper
											<ul.videos.as-x-small.default
												<li.label:Étape suivante
												<li.video
													<a(href=#video)
														<div.image
														<div.title:Titre de la video
											<ul.videos.as-x-small
												<li.label:Ou 3 étapes alternatives
												<li.video
													<a(href=#video)
														<div.image
														<div.title:Titre de la video
												<li.video
													<a(href=#video)
														<div.image
														<div.title:Titre de la video
												<li.video
													<a(href=#video)
														<div.image
														<div.title:Titre de la video
												<li.video
													<a(href=#video)
														<div.image
														<div.title:Titre de la video
												<li.video
													<a(href=#video)
														<div.image
														<div.title:Titre de la video
												<li.video
													<a(href=#video)
														<div.image
														<div.title:Titre de la video
									# =================================================================
									# CONTROLS
									# =================================================================
									<div.controls.L.hidden(data-layout=centered)
										<button.do(data-action=replay)
											<span:&#8634;
										<button.do(data-action=fullscreen)
											<span:&#8865;
										<button.do(data-action=sound)
											<span:&#9836;
							# =========================================================================
							# DESCRIPTION
							# =========================================================================
							# FIXME: Rename steps to description?
							<div.steps
								<div.step.editor.hidden.when(data-state=edit:true)
									<h2
										<button.do.remove(data-action=remove):
											<span:&times;
										<span.text:Etape <span.out(data-field=currentStep):1>/<span.out(data-field=totalSteps):1>
									<div.title	
										<label.T(for=title):Titre de l'étape
										<div.input
											<input.in(name=title,type=text)
									<div.description
										<label(for=description):Description (150 mots)
										<div.textarea
											<textarea.in(name=description,type=text,rows=7)
								<div.step.when(data-state=edit:false)
									<div.actions.right.pos-abs.to-e
										<button.do.previous(data-action=previousStep)
											<span:&larr;
										<button.do.next(data-action=nextStep)
											<span:&rarr;
									<h2
										<span.T:Étape> <span.out(data-field=currentStep):1>/<span.out(data-field=totalSteps):1>:
										<span.out(data-field=title):${title}
									<div.description.out(data-field=description:markdown):${description}
								<div.clearer
							# =========================================================================
							# GALLERY
							# =========================================================================
							<div.related-photos.when.hidden(data-state=edit:true)
								<button.big.do(data-action=uploadPhoto)
									<span.label.T:Add photo
								<ul.photos
									<li.photo.template
										<span.label:1
										<div.remove
											<span:&times;
								<div.clearer
						#EOF
				<section.add-step
					# FIXME: This button is wrong, and not consistent with he rest of the interface
					<div.when.hidden(data-state=stepComplete:true)
						<button.add.do(data-action=addStep)
							<span.T.label:+
						<span.do.action(data-action=addStep):Ajouter une étape
					<div.message.when(data-state=stepComplete:false)
						<h3.title.T:Complétez l'étape précédente pour continuer
						<div.text
							<p.T:
								Afin de pouvoir publier la vidéo ou ajouter une étape, vous devez
								auparavant avoir chargé une vidéo à l'étape 
								précédente.
				<section.information.when(data-state=stepComplete:true)
					<div.form
						<div.field
							<label:Titre de votre tutoriel
							<div.input
								<input.in(name=title)
						<div.field
							<label:Categories
							<ul.categories
								# NOTE: Should display sub-categories as well, but templating doesn't work for that
								${for:categories}
								<li.toggle.category(data-category="${this.name}")
									<span.label:${this.name}
									${if:this.children}
									<ul
										${for:this.children}
										<li.toggle.subcategory(data-category="${this.name}")
											<span.label:${this.name}
										${end}
									${end}
								${end}
						<div.actions.as-vertical
							<div.message.when.hidden(data-state=complete:false)
								<h3.title.T:Il manque encore quelque chose...
								<div.text
									<p.T:
										Afin de pouvoir publier la vidéo, il faut vous assurer que:
									<ul
										<li:Toutes les étapes ont un <em:titre> et une <em:description>
										<li:Vous avez fourni un <em:titre à la vidéo>
										<li:Vous avez <em:choisi au moins une catégorie>
							<div.when(data-state=complete:true)
								<div.when(data-state=status:created)
									<button.default.with-icon.do(data-action=publish)
										<span.T:Publier le tutoriel
								<div.message.when.hidden(data-state=status:published)
									<h3.title.T:Félicitations, votre tutoriel est publié!
									<div.text
										<p.T:
											Vous pouvez le visionner maintenant en allant à l'adresse suivante
										<p.focus
											 <a.tutorialURL(href=#,target=_blank):#>
										<p.T
											Notez que celui-ci ne sera visible par tous qu'une fois
											 approuvé par l'équipe de modération.
											Afin de pouvoir publier la vidéo ou ajouter une étape, vous devez
											auparavant avoir chargé une vidéo à l'étape 
											précédente.
								<div.message.when(data-state=status:approved)
									<h3.title.T:Félicitation, votre tutoriel a approuvé
									<div.text
										<p.T:
											Vous pouvez maintenant le visionner en tout temps en allant à l'adresse suivante
										<p.focus
											 <a.tutorialURL(href=#,target=_blank):#>
										<p.T
											Notez que les changements que vous faites dans cette page sont
											automatiquement sauvegardés.
								<div.message.when(data-state=status:promoted)
									<h3.title.T:Félicitation, votre tutoriel a été promu comme "officiel"
									<div.text
										<p.T:
											Vous pouvez le visionner en tout temps en allant à l'adresse suivante
										<p.focus
											 <a.tutorialURL(href=#,target=_blank):#>
										<p.T
											Notez que les changements que vous faites dans cette page sont
											automatiquement sauvegardés.
								<div.message.when(data-state=status:flagged)
									<h3.title.T:Attention, votre tutoriel a été l'objet de plaintes
									<div.text
										<p.T:
											Votre tutoriel pourrait être retiré du site s'il n'est
											# FIXME: LINK
											pas conforme à la charte d'utilisation. Pour l'instant, il
											reste accessible à tous à l'adresse suivante, mais
											n'apparaîtra pas dans les pages d'indexation.
										<p.focus
											 <a.tutorialURL(href=#,target=_blank):#>
										<p.T
											Notez que les changements que vous faites dans cette page sont
											automatiquement sauvegardés.
								<div.message.when(data-state=status:flagged)
									<h3.title.T:Nous sommes désolé, votre tutoriel a été retiré
									# FIXME: Support this better
				<div.ImageViewer.widget(data-widget=artnet.ImageViewer)
					<div.overlay.do(data-action=close)
					<div.controls
						<div.controls
							<button.close.do(data-action=close):
								<span:&times;
						<div.previous.do(data-action=previous)
							<span:&#10092;
						<div.next.do(data-action=next)
							<span:&#10093;
					<div.content
						<img.image
				# EOF
			<div#Footer
				<div.body
					<div.span-66p.col.first
						# FIXME: Disabled for now
						# <ul
						# 	<li:À propos
						# 	<li:Conditions d'utilisation
					<div.span-33p.col.last
						<ul
							<li:
								&copy; <a(href=http://communautique.qc.ca,target=_blank):Communautique>, 2013
							<li#FFTag
								<a(href=http://ffctn.com,target=_blank)
									<img(src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH3AceDwEzBlmdIgAAAQxJREFUKM+Vkb1KA1EQheePGJMgKMFStLbxEcRK0BfwAfJMgk1QUCtBTW3jA9hYSSoRC0Ewu/deYXdz77HJilmSwgMDw5mB8w3DAGiBjIimC3qy5mbm3MBUj5j5EsAxM/eZ+Wy13b4jIiIAc+WCvwfAANYzl58351wj+RD2Y4p7wnKSkK5FtJtiPCCmkak9djudpzkkM3tXaDemWLakNVbVzaIoCjMbi8jHL3MzMnduNOu3v7LJciTn/UBEDhPSroo8M8tKNa12ROQlJZyu9XoPfxPUf4dbAORDqBP6kzwfAlAfwk2dUN8QmbjyIVwR09vM+zTTDR/CBRG9LryhLMutJnPT4yWfXiqhf+oHoTHjmfhVuWsAAAAASUVORK5CYII=",align=absmiddle)
									<span:FFunction
					<div.clearer
					<script(type=text/javascript):artnet.start();
			# EOF
# EOF
===
